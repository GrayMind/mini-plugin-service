# mini-plugin-service
一个简单的插件系统

# 扩展阅读
## 插件系统的核心组件
插件系统的核心组件通常包含:

1. 插件容器(Plugin Container)

插件容器是插件系统的基础,负责加载、初始化、管理插件生命周期。主流实现有OSGi,Eclipse等。

2. 插件管理器(Plugin Manager) 

控制插件的部署、升级、配置、启用/禁用等。提供插件管理UI。

3. 插件注册表(Plugin Registry)

记录插件的元数据信息,如名称、版本、作者等。插件管理器依赖它找到插件。

4. 插件仓库(Plugin Repository)

插件文件的存储仓库,支持插件上传/下载。可以是文件系统目录或者远程仓库。

5. 插件接口(Plugin API/SPI)

插件需要实现的接口,由应用系统定义,插件根据此接口进行开发。

6. 服务发现机制(Service Locator)

提供接口让插件查询和访问系统服务,实现插件之间或与宿主的解耦。

7. 依赖解析机制(Dependency Resolver) 

解析插件依赖并注入,类似Maven、Gradle。

8. 事件总线(Event Bus)

用于插件之间或插件与宿主进程解耦通信。

9. 安全管理器(Security Manager)

限制恶意插件访问敏感资源,保护系统安全。

这些组件的实现确保插件系统是可扩展、安全和易于管理的。


## 插件容器

插件容器是插件系统的核心组件,它提供插件的运行环境,管理插件的生命周期。

插件容器的主要功能包括:

1. 加载插件:根据配置找到插件位置,加载插件类、资源等到内存。
2. 初始化插件:调用插件的初始化方法,传入插件需要的上下文、配置等信息。
3. 托管插件:为每个插件实例分配内存、线程等资源。
4. 控制生命周期:启动、停止、卸载插件。
5. 提供服务:向插件暴露服务接口,供插件调用。
6. 事件通知:插件之间通过事件进行解耦通信。
7. 监控插件:监控插件状态、资源消耗情况。
8. 依赖管理:解析并注入插件的依赖。
9. 统一配置:通过统一的方式管理插件配置。
10. 日志记录:记录插件运行时日志。

插件容器屏蔽了插件的具体实现,为插件提供一个简单、统一的运行环境。这使得插件开发者只需要关注插件业务自身的开发,而不需要关心与宿主环境的集成问题。

主流的插件容器有OSGi、Eclipse等。插件容器的实现是插件系统的基础和核心。


## 插件接口
插件接口是插件系统中规定插件需要实现的一系列接口方法。它是插件与宿主应用集成的纽带,起到定义插件功能和协议的作用。

插件接口通常包含:

1. 初始化/销毁接口

定义插件的初始化和销毁方法,如init()和destroy()。

2. 功能接口

定义插件需要实现的业务功能接口方法。

3. 配置接口 

用于获取和设置插件配置参数的接口。

4. 服务接口

插件需实现的服务接口,供其他插件或宿主调用。

5. 回调接口

宿主实现的接口,供插件调用触发某些动作。

6. 事件接口

定义插件和宿主之间进行事件通信的接口。

7. 版本接口

定义插件版本号等元信息的接口。

8. 日志接口

定义插件产生日志的接口方法。

插件需要实现这些接口与宿主应用进行集成,才能在应用中正常工作。

插件接口设计得越简洁,插件就越容易开发。所以插件接口是插件系统设计的关键。